using+System%3B%0Ausing+System.Collections.Generic%3B%0Ausing+System.Configuration%3B%0Ausing+System.Data.Common%3B%0Ausing+System.Data.Entity%3B%0Ausing+System.Data.Entity.Validation%3B%0Ausing+System.Diagnostics%3B%0Ausing+System.Globalization%3B%0Ausing+System.Linq%3B%0Ausing+System.Linq.Expressions%3B%0Ausing+System.Reflection%3B%0Ausing+System.ServiceModel%3B%0Ausing+System.Threading%3B%0Ausing+System.Threading.Tasks%3B%0Ausing+System.Transactions%3B%0Ausing+Tereos.Gaia.Tools.Constants%3B%0Ausing+Tereos.Gaia.Tools.CustomMessageHeaders%3B%0Ausing+Tereos.Gaia.Tools.Log%3B%0Ausing+Tereos.Gaia.Tools.Transactions%3B%0A%0Anamespace+Tereos.Gaia.DAL.Data.Command%0A%7B%0A++++%2F%2F%2F+%3Csummary%3E%0A++++%2F%2F%2F+++++EntityRepositoryBase+class%0A++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++%2F%2F%2F+%3Ctypeparam+name%3D%22T%22%3E%3C%2Ftypeparam%3E%0A++++public+class+EntityRepositoryBase%3CT%3E+%3A+IDisposable%2C+IEntityRepository%3CT%3E+where+T+%3A+class%0A++++%7B%0A++++++++%23region+CONSTANTS%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Creation+date+field+name.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++private+const+string+DATE_CREATION_FIELD+%3D+%22DATE_CREATION%22%3B%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Modification+date+field+name.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++private+const+string+DATE_MODIFICATION_FIELD+%3D+%22DATE_MODIFICATION%22%3B%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+User+creation+field+name.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++private+const+string+USER_CREATION_FIELD+%3D+%22USER_CREATION%22%3B%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+User+modification+field+name.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++private+const+string+USER_MODIFICATION_FIELD+%3D+%22USER_MODIFICATION%22%3B%0A%0A++++++++%23endregion%0A%0A++++++++%23region+INTERNAL%0A++++++++%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+_disposed%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++internal+bool+_disposed%3B%0A%0A++++++++%23endregion%0A%0A++++++++%23region+PRIVATE%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Permit+to+retrieve+the+UserId.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++private+string+UserID%0A++++++++%7B%0A++++++++++++get%0A++++++++++++%7B%0A++++++++++++++++if+%28OperationContext.Current+%21%3D+null+%26%26+OperationContext.Current.IncomingMessageProperties+%21%3D+null%29%0A++++++++++++++++%7B%0A++++++++++++++++++++var+customHeader+%3D%0A++++++++++++++++++++++++OperationContext.Current.IncomingMessageProperties.FirstOrDefault%28%0A++++++++++++++++++++++++++++f+%3D%3E+f.Key+%3D%3D+Constant.CustomHeader%29.Value+as%0A++++++++++++++++++++++++CustomHeader%3B%0A++++++++++++++++++++if+%28customHeader+%21%3D+null%29%0A++++++++++++++++++++%7B%0A++++++++++++++++++++++++return+customHeader.GuiUserId%3B%0A++++++++++++++++++++%7D%0A++++++++++++++++%7D%0A%0A++++++++++++++++return+string.Empty%3B%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++private+static+int+MaxCore%0A++++++++%7B%0A++++++++++++get%0A++++++++++++%7B%0A++++++++++++++++try%0A++++++++++++++++%7B%0A++++++++++++++++++++int+x+%3D+Convert.ToInt32%28ConfigurationManager.AppSettings%5B%22MaxDegreeofParallelism%22%5D%29%3B%0A++++++++++++++++++++if+%28x+%3D%3D+0+%7C%7C+x+%3C+-1%29%0A++++++++++++++++++++%7B%0A++++++++++++++++++++++++x+%3D+-1%3B%0A++++++++++++++++++++%7D%0A%0A++++++++++++++++++++return+x%3B%0A++++++++++++++++%7D%0A++++++++++++++++catch+%28Exception%29%0A++++++++++++++++%7B%0A++++++++++++++++++++return+-1%3B%0A++++++++++++++++%7D%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Update+the+property+with+the+corresponding+name+of+an+entity+object.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22entity%22%3EEntity+object%3C%2Fparam%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22propertyName%22%3EProperty+Name%3C%2Fparam%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22value%22%3EValue+to+set%3C%2Fparam%3E%0A++++++++private+void+UpdateProperty%28T+entity%2C+string+propertyName%2C+object+value%29%0A++++++++%7B%0A++++++++++++PropertyInfo+propertyInfo+%3D+entity.GetType%28%29.GetProperty%28propertyName%29%3B%0A++++++++++++if+%28propertyInfo+%21%3D+null%29%0A++++++++++++%7B%0A++++++++++++++++propertyInfo.SetValue%28entity%2C+value%29%3B%0A++++++++++++%7D%0A++++++++%7D%0A++++++%0A++++++++%23endregion%0A%0A++++++++%23region+PROTECTED%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Gets+the+data+context.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++internal+Context+DataContext%0A++++++++%7B%0A++++++++++++get+%7B+return+Context.GetContext%28%29%3B+%7D%0A++++++++%7D%0A%0A++++++++%23endregion%0A%0A++++++++%23region+PUBLIC%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Create+new+instance+with+T+type%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Creturns%3E%3C%2Freturns%3E%0A++++++++public+T+CreateNewInstance%28%29%0A++++++++%7B%0A++++++++++++return+DataContext.Set%3CT%3E%28%29.Create%28%29%3B%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Initializes+a+new+instance+of+the+%3Csee+cref%3D%22EntityRepositoryBase%26lt%3BT%26gt%3B%22+%2F%3E+class.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++public+EntityRepositoryBase%28%29%0A++++++++%7B%0A++++++++%7D%0A++++++++%0A++++++++public+virtual+string+GetDatabaseName%28%29%0A++++++++%7B%0A++++++++++++if+%28DataContext+%21%3D+null+%26%26+DataContext.Database+%21%3D+null+%26%26+DataContext.Database.Connection+%21%3D+null%29%0A++++++++++++++++return+DataContext.Database.Connection.Database%3B%0A++++++++++++return+null%3B%0A++++++++%7D%0A++++++++%23endregion%0A%0A++++++++%23region+VIRTUAL%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+++++Dispose%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++public+virtual+void+Dispose%28%29%0A++++++++%7B%0A++++++++++++%2F%2FGetDataContext+%3D+null%3B%0A++++++++++++Dispose%28true%29%3B%0A++++++++++++GC.SuppressFinalize%28this%29%3B%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Gets+all.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Creturns%3E%0A++++++++%2F%2F%2F+IQueryable%3CT%3E%0A++++++++%2F%2F%2F+%3C%2Freturns%3E%0A++++++++public+virtual+IQueryable%3CT%3E+GetAll%28%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++return+DataContext.Set%3CT%3E%28%29.AsQueryable%28%29%3B%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Count+items+for+specific+predicate%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22predicate%22%3E%3C%2Fparam%3E%0A++++++++%2F%2F%2F+%3Creturns%3E%3C%2Freturns%3E%0A++++++++public+virtual+int+Count%28Expression%3CFunc%3CT%2C+bool%3E%3E+predicate%29%0A++++++++++++++++++++%7B%0A++++++++++++return+DataContext.Set%3CT%3E%28%29.Count%28predicate%29%3B%0A++++++++++++++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Determines+whether+%5Bcontains%5D+%5Bthe+specified+predicate%5D.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22predicate%22%3EThe+predicate.%3C%2Fparam%3E%0A++++++++%2F%2F%2F+%3Creturns%3E%0A++++++++%2F%2F%2F+%3Cc%3Etrue%3C%2Fc%3E+if+%5Bcontains%5D+%5Bthe+specified+predicate%5D%3B+otherwise%2C+%3Cc%3Efalse%3C%2Fc%3E.%0A++++++++%2F%2F%2F+%3C%2Freturns%3E%0A++++++++public+virtual+bool+Contains%28Expression%3CFunc%3CT%2C+bool%3E%3E+predicate%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++return+DataContext.Set%3CT%3E%28%29.Count%28predicate%29+%3E+0%3B%0A++++++++++++%7D%0A++++++++++++catch+%28Exception+ex%29%0A++++++++++++%7B%0A++++++++++++++++Logger.LogDebugMessage%28ex.ToString%28%29%29%3B%0A++++++++++++++++throw%3B%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A+++++++++++++++%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Finds+the+specified+predicate.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22predicate%22%3EThe+predicate.%3C%2Fparam%3E%0A++++++++%2F%2F%2F+%3Creturns%3E%3C%2Freturns%3E%0A++++++++public+virtual+List%3CT%3E+Find%28Expression%3CFunc%3CT%2C+bool%3E%3E+predicate%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++return+DataContext.Set%3CT%3E%28%29.Where%28predicate%29.ToList%28%29%3B%0A++++++++++++%7D%0A++++++++++++catch+%28Exception+ex%29%0A++++++++++++%7B%0A++++++++++++++++Logger.LogDebugMessage%28ex.ToString%28%29%29%3B%0A++++++++++++++++throw%3B%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A++++++++++++++++%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Finds+the+specified+predicate.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22predicate%22%3EThe+predicate.%3C%2Fparam%3E%0A++++++++%2F%2F%2F+%3Creturns%3E%3C%2Freturns%3E%0A++++++++public+virtual+IQueryable%3CT%3E+FindByQuery%28Expression%3CFunc%3CT%2C+bool%3E%3E+predicate%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++return+DataContext.Set%3CT%3E%28%29.Where%28predicate%29%3B%0A++++++++++++%7D%0A++++++++++++catch+%28Exception+ex%29%0A++++++++++++%7B%0A++++++++++++++++Logger.LogDebugMessage%28ex.ToString%28%29%29%3B%0A++++++++++++++++throw%3B%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A+++++++++++++++%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Firsts+the+specified+predicate.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22predicate%22%3EThe+predicate.%3C%2Fparam%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22selector%22%3E%3C%2Fparam%3E%0A++++++++%2F%2F%2F+%3Creturns%3EGeneric+element%3C%2Freturns%3E%0A++++++++public+virtual+List%3CTResult%3E+FindSelect%3CTResult%3E%28Expression%3CFunc%3CT%2C+bool%3E%3E+predicate%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++Expression%3CFunc%3CT%2C+TResult%3E%3E+selector%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++return+DataContext.Set%3CT%3E%28%29.Where%28predicate%29.Select%28selector%29.ToList%28%29%3B%0A++++++++++++%7D%0A++++++++++++catch+%28Exception+ex%29%0A++++++++++++%7B%0A++++++++++++++++Logger.LogDebugMessage%28ex.ToString%28%29%29%3B%0A++++++++++++++++throw%3B%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A+++++++++++++++%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Singles+the+specified+predicate.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22predicate%22%3EThe+predicate.%3C%2Fparam%3E%0A++++++++%2F%2F%2F+%3Creturns%3EGeneric+element%3C%2Freturns%3E%0A++++++++public+virtual+T+Single%28Expression%3CFunc%3CT%2C+bool%3E%3E+predicate%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++return+DataContext.Set%3CT%3E%28%29.SingleOrDefault%28predicate%29%3B%0A++++++++++++%7D%0A++++++++++++catch+%28Exception+ex%29%0A++++++++++++%7B%0A++++++++++++++++Logger.LogDebugMessage%28ex.ToString%28%29%29%3B%0A++++++++++++++++throw%3B%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A++++++++++++++%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Firsts+the+specified+predicate.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22predicate%22%3EThe+predicate.%3C%2Fparam%3E%0A++++++++%2F%2F%2F+%3Creturns%3EGeneric+element%3C%2Freturns%3E%0A++++++++public+virtual+T+First%28Expression%3CFunc%3CT%2C+bool%3E%3E+predicate%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++return+DataContext.Set%3CT%3E%28%29.FirstOrDefault%28predicate%29%3B%0A++++++++++++%7D%0A%23if+DEBUG%0A++++++++++++catch+%28Exception+e%29%0A++++++++++++%7B%0A++++++++++++++++Console.Write%28e%29%3B%0A++++++++++++++++return+null%3B%0A++++++++++++%7D%0A%23endif%0A++++++++++++finally%0A++++++++++++%7B%0A+++++++++++++++%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Deletes+the+specified+entity.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22entity%22%3EThe+entity.%3C%2Fparam%3E%0A++++++++public+virtual+void+Delete%28T+entity%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++if+%28DataContext.Entry%28entity%29.State+%3D%3D+EntityState.Detached%29%0A++++++++++++++++%7B%0A++++++++++++++++++++Attach%28entity%29%3B%0A++++++++++++++++%7D%0A%0A++++++++++++++++DataContext.Set%3CT%3E%28%29.Remove%28entity%29%3B%0A++++++++++++++++DataContext.SaveChanges%28%29%3B%0A++++++++++++%7D%0A++++++++++++catch+%28Exception+ex%29%0A++++++++++++%7B%0A++++++++++++++++Logger.LogDebugMessage%28ex.ToString%28%29%29%3B%0A++++++++++++++++throw%3B%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A+++++++++++++%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Find+and+Bulk+Deletes+the+specified+predicate.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22predicate%22%3E%3C%2Fparam%3E%0A++++++++public+virtual+void+FindDelete%28Expression%3CFunc%3CT%2C+bool%3E%3E+predicate%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++List%3CT%3E+entityList+%3D+DataContext.Set%3CT%3E%28%29.Where%28predicate%29.ToList%28%29%3B%0A++++++++++++++++if+%28entityList.Any%28%29%29%0A++++++++++++++++%7B%0A+++++++++++++++++++%0A++++++++++++++++++++int+maxCore+%3D+MaxCore%3B%0A++++++++++++++++++++int+count+%3D+0%3B%0A++++++++++++++++++++%0A++++++++++++++++++++entityList.ForEach%28entity+%3D%3E%0A++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++count%2B%2B%3B%0A++++++++++++++++++++++++++++if+%28DataContext.Entry%28entity%29.State+%3D%3D+EntityState.Detached%29%0A++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++Attach%28entity%29%3B%0A++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++++++DataContext.Set%3CT%3E%28%29.Remove%28entity%29%3B%0A%0A++++++++++++++++++++++++++++if+%28count+%25+1000+%3D%3D+0%29%0A++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++DataContext.SaveChanges%28%29%3B%0A++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++%7D%29%3B%0A%0A++++++++++++++++++++DataContext.SaveChanges%28%29%3B%0A++++++++++++++++%7D%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A+++++++++++++++%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Find+and+Bulk+Deletes+the+specified+predicate.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22predicate%22%3E%3C%2Fparam%3E%0A++++++++public+virtual+void+DeleteWhere%28Expression%3CFunc%3CT%2C+bool%3E%3E+predicate%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++var+dbSet+%3D+DataContext.Set%3CT%3E%28%29%3B%0A++++++++++++++++dbSet.RemoveRange%28dbSet.Where%28predicate%29%29%3B%0A++++++++++++++++DataContext.SaveChanges%28%29%3B%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Adds+the+specified+entity.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22entity%22%3EThe+entity.%3C%2Fparam%3E%0A++++++++public+virtual+void+Add%28T+entity%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++%2F%2F+Update+technical+fields%0A++++++++++++++++this.UpdateProperty%28entity%2C+USER_CREATION_FIELD%2C+this.UserID%29%3B%0A++++++++++++++++this.UpdateProperty%28entity%2C+DATE_CREATION_FIELD%2C+DateTime.Now%29%3B%0A+++++++++++++++%0A++++++++++++++++DataContext.Set%3CT%3E%28%29.Add%28entity%29%3B%0A++++++++++++++++DataContext.SaveChanges%28%29%3B%0A++++++++++++%7D%0A++++++++++++catch+%28DbEntityValidationException+e%29%0A++++++++++++%7B%0A++++++++++++++++foreach+%28var+eve+in+e.EntityValidationErrors%29%0A++++++++++++++++%7B%0A++++++++++++++++++++Logger.LogDebugMessage%28string.Format%28CultureInfo.InvariantCulture%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++%22Entity+of+type+%5C%22%7B0%7D%5C%22+in+state+%5C%22%7B1%7D%5C%22+has+the+following+validation+errors%3A%22%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++eve.Entry.Entity.GetType%28%29.Name%2C+eve.Entry.State%29%29%3B%0A++++++++++++++++++++foreach+%28var+ve+in+eve.ValidationErrors%29%0A++++++++++++++++++++%7B%0A++++++++++++++++++++++++Logger.LogDebugMessage%28string.Format%28CultureInfo.InvariantCulture%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%22-+Property%3A+%5C%22%7B0%7D%5C%22%2C+Error%3A+%5C%22%7B1%7D%5C%22%22%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ve.PropertyName%2C+ve.ErrorMessage%29%29%3B%0A++++++++++++++++++++%7D%0A++++++++++++++++%7D%0A++++++++++++++++Logger.LogTechnicalError%28e%29%3B%0A++++++++++++++++DataContext.Set%3CT%3E%28%29.Remove%28entity%29%3B%0A++++++++++++++++throw%3B%0A++++++++++++%7D%0A++++++++++++catch+%28Exception+ex%29%0A++++++++++++%7B%0A++++++++++++++++Logger.LogDebugMessage%28ex.ToString%28%29%29%3B%0A++++++++++++++++DataContext.Set%3CT%3E%28%29.Remove%28entity%29%3B%0A++++++++++++++++throw%3B%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A+++++++++++++++%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Attaches+the+specified+entity.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22entity%22%3EThe+entity.%3C%2Fparam%3E%0A++++++++public+virtual+void+Attach%28T+entity%29%0A++++++++%7B%0A++++++++++++DataContext.Set%3CT%3E%28%29.Attach%28entity%29%3B%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Attaches+the+specified+entity.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++public+virtual+void+SaveChanges%28%29%0A++++++++%7B%0A++++++++++++DataContext.SaveChanges%28%29%3B%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+Edits+the+specified+entity.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22entity%22%3EThe+entity.%3C%2Fparam%3E%0A++++++++public+virtual+void+Edit%28T+entity%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++%2F%2F+Update+technical+fields%0A++++++++++++++++this.UpdateProperty%28entity%2C+USER_MODIFICATION_FIELD%2C+this.UserID%29%3B%0A++++++++++++++++this.UpdateProperty%28entity%2C+DATE_MODIFICATION_FIELD%2C+DateTime.Now%29%3B%0A%0A+++++++++++++++if+%28DataContext.Entry%28entity%29.State+%3D%3D+EntityState.Unchanged%29%0A+++++++++++++++%7B%0A+++++++++++++++++++DataContext.Entry%28entity%29.State+%3D+EntityState.Detached%3B%0A+++++++++++++++%7D%0A+++++++++++++++%0A++++++++++++++++DataContext.Entry%28entity%29.State+%3D+EntityState.Modified%3B%0A++++++++++++++++DataContext.SaveChanges%28%29%3B%0A++++++++++++%7D%0A++++++++++++catch+%28Exception+ex%29%0A++++++++++++%7B%0A++++++++++++++++Logger.LogDebugMessage%28ex.ToString%28%29%29%3B%0A++++++++++++++++throw%3B%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A+++++++++++++++%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+++++Selects+the+specified+predicate.%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22selector%22%3E%3C%2Fparam%3E%0A++++++++%2F%2F%2F+%3Creturns%3EGeneric+element%3C%2Freturns%3E%0A++++++++public+virtual+List%3CTResult%3E+Select%3CTResult%3E%28Expression%3CFunc%3CT%2C+TResult%3E%3E+selector%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++return+DataContext.Set%3CT%3E%28%29.Select%28selector%29.ToList%28%29%3B%0A++++++++++++%7D%0A++++++++++++catch+%28Exception+ex%29%0A++++++++++++%7B%0A++++++++++++++++Logger.LogDebugMessage%28ex.ToString%28%29%29%3B%0A++++++++++++++++throw%3B%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A++++++++++++++++%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++public+virtual+void+Refresh%28%29%0A++++++++%7B%0A++++++++++++Context+context+%3D+DataContext%3B%0A++++++++++++context.Dispose%28%29%3B%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+++++Add++Bulk+data+to+the+Database%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22entityList%22%3E%3C%2Fparam%3E%0A++++++++public+virtual+void+AddBulk%28List%3CT%3E+entityList%29%0A++++++++%7B%0A++++++++++++Context+context+%3D+DataContext%3B%0A++++++++++++DbSet%3CT%3E+dbset+%3D+context.Set%3CT%3E%28%29%3B%0A+++++++++++%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++if+%28entityList.Any%28%29%29%0A++++++++++++++++%7B%0A++++++++++++++++++++int+count+%3D+0%3B%0A+++++++++++++++++++%0A++++++++++++++++++++entityList.ForEach%28entity+%3D%3E%0A++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++try%0A++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++++++count%2B%2B%3B%0A%0A++++++++++++++++++++++++++++++++%2F%2F+Update+technical+fields%0A++++++++++++++++++++++++++++++++this.UpdateProperty%28entity%2C+USER_CREATION_FIELD%2C+this.UserID%29%3B%0A++++++++++++++++++++++++++++++++this.UpdateProperty%28entity%2C+DATE_CREATION_FIELD%2C+DateTime.Now%29%3B%0A%0A++++++++++++++++++++++++++++++++dbset.Add%28entity%29%3B%0A++++++++++++++++++++++++++++++++++++if+%28count+%25+1000+%3D%3D+0%29%0A++++++++++++++++++++++++++++++++++++%7B%0A+++++++++++++++++++++++++++++++++++++++++context.SaveChanges%28%29%3B%0A++++++++++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++++++++++%0A++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++++++catch+%28DbEntityValidationException+e%29%0A++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++foreach+%28var+eve+in+e.EntityValidationErrors%29%0A++++++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++++++Logger.LogDebugMessage%28string.Format%28CultureInfo.InvariantCulture%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%22Entity+of+type+%5C%22%7B0%7D%5C%22+in+state+%5C%22%7B1%7D%5C%22+has+the+following+validation+errors%3A%22%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++eve.Entry.Entity.GetType%28%29.Name%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++eve.Entry.State%29%29%3B%0A++++++++++++++++++++++++++++++++++++foreach+%28var+ve+in+eve.ValidationErrors%29%0A++++++++++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++++++++++Logger.LogDebugMessage%28string.Format%28CultureInfo.InvariantCulture%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%22-+Property%3A+%5C%22%7B0%7D%5C%22%2C+Error%3A+%5C%22%7B1%7D%5C%22%22%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ve.PropertyName%2C+ve.ErrorMessage%29%29%3B%0A++++++++++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++++++++++Logger.LogTechnicalError%28e%29%3B%0A++++++++++++++++++++++++++++++++dbset.Remove%28entity%29%3B%0A++++++++++++++++++++++++++++++++throw%3B%0A++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++++++catch+%28Exception+e%29%0A++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++var+trace+%3D+e.StackTrace%3B%0A++++++++++++++++++++++++++++++++dbset.Remove%28entity%29%3B%0A++++++++++++++++++++++++++++++++throw+e%3B%0A++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++%7D%29%3B%0A%0A++++++++++++++++++++context.SaveChanges%28%29%3B%0A++++++++++++++++%7D%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A++++++++++++++++%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+++++Add++Bulk+data+to+the+Database%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22entityList%22%3E%3C%2Fparam%3E%0A++++++++public+virtual+void+AddRange%28List%3CT%3E+entityList%29%0A++++++++%7B%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++foreach+%28T+entity+in+entityList%29%0A++++++++++++++++%7B%0A++++++++++++++++++++%2F%2F+Update+technical+fields%0A++++++++++++++++++++this.UpdateProperty%28entity%2C+USER_CREATION_FIELD%2C+this.UserID%29%3B%0A++++++++++++++++++++this.UpdateProperty%28entity%2C+DATE_CREATION_FIELD%2C+DateTime.Now%29%3B%0A++++++++++++++++%7D%0A%0A++++++++++++++++DataContext.Set%3CT%3E%28%29.AddRange%28entityList%29%3B%0A++++++++++++++++DataContext.SaveChanges%28%29%3B%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++public+virtual+void+EditBulk%28List%3CT%3E+entityList%29%0A++++++++%7B%0A++++++++++++Context+context+%3D+DataContext%3B%0A++++++++++++DbSet%3CT%3E+dbset+%3D+DataContext.Set%3CT%3E%28%29%3B%0A+++++++++++%0A++++++++++++try%0A++++++++++++%7B%0A++++++++++++++++if+%28entityList.Any%28%29%29%0A++++++++++++++++%7B%0A++++++++++++++++++++int+count+%3D+0%3B%0A%0A++++++++++++++++++++entityList.ForEach%28entity+%3D%3E%0A++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++try%0A++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++count%2B%2B%3B%0A++++++++++++++++++++++++++++++++%2F%2Fdbset.Attach%28entity%29%3B%0A++++++++++++++++++++++++++++++++if+%28context.Entry%28entity%29.State+%3D%3D+EntityState.Detached%29%0A++++++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++++++dbset.Attach%28entity%29%3B%0A++++++++++++++++++++++++++++++++%7D%0A%0A++++++++++++++++++++++++++++++++%2F%2F+Update+technical+fields%0A++++++++++++++++++++++++++++++++this.UpdateProperty%28entity%2C+USER_MODIFICATION_FIELD%2C+this.UserID%29%3B%0A++++++++++++++++++++++++++++++++this.UpdateProperty%28entity%2C+DATE_MODIFICATION_FIELD%2C+DateTime.Now%29%3B%0A%0A++++++++++++++++++++++++++++++++context.Entry%28entity%29.State+%3D+EntityState.Modified%3B%0A++++++++++++++++++++++++++++++++if+%28count+%25+1000+%3D%3D+0%29%0A++++++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++++++context.SaveChanges%28%29%3B%0A++++++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++++++catch+%28DbEntityValidationException+e%29%0A++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++foreach+%28var+eve+in+e.EntityValidationErrors%29%0A++++++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++++++Logger.LogDebugMessage%28string.Format%28CultureInfo.InvariantCulture%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%22Entity+of+type+%5C%22%7B0%7D%5C%22+in+state+%5C%22%7B1%7D%5C%22+has+the+following+validation+errors%3A%22%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++eve.Entry.Entity.GetType%28%29.Name%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++eve.Entry.State%29%29%3B%0A++++++++++++++++++++++++++++++++++++foreach+%28var+ve+in+eve.ValidationErrors%29%0A++++++++++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++++++++++Logger.LogDebugMessage%28string.Format%28CultureInfo.InvariantCulture%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%22-+Property%3A+%5C%22%7B0%7D%5C%22%2C+Error%3A+%5C%22%7B1%7D%5C%22%22%2C%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ve.PropertyName%2C+ve.ErrorMessage%29%29%3B%0A++++++++++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++++++++++Logger.LogTechnicalError%28e%29%3B%0A++++++++++++++++++++++++++++++++throw%3B%0A++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++++++catch+%28Exception+ex%29%0A++++++++++++++++++++++++++++%7B%0A++++++++++++++++++++++++++++++++throw+ex%3B%0A++++++++++++++++++++++++++++%7D%0A++++++++++++++++++++++++%7D%29%3B%0A%0A++++++++++++++++++++context.SaveChanges%28%29%3B%0A++++++++++++++++%7D%0A++++++++++++%7D%0A++++++++++++finally%0A++++++++++++%7B%0A++++++++++++++++%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++%2F%2F%2F+%3Csummary%3E%0A++++++++%2F%2F%2F+++++Releases+unmanaged+and+-+optionally+-+managed+resources%0A++++++++%2F%2F%2F+%3C%2Fsummary%3E%0A++++++++%2F%2F%2F+%3Cparam+name%3D%22disposing%22%3E%0A++++++++%2F%2F%2F+++++%3Cc%3Etrue%3C%2Fc%3E+to+release+both+managed+and+unmanaged+resources%3B+%3Cc%3Efalse%3C%2Fc%3E+to+release+only+unmanaged+resources.%0A++++++++%2F%2F%2F+%3C%2Fparam%3E%0A++++++++protected+virtual+void+Dispose%28bool+disposing%29%0A++++++++%7B%0A++++++++++++if+%28%21_disposed%29%0A++++++++++++%7B%0A++++++++++++++++if+%28disposing%29%0A++++++++++++++++%7B%0A++++++++++++++++++++%0A++++++++++++++++++++%2F%2FGetDataContext.Dispose%28%29%3B%0A++++++++++++++++%7D%0A++++++++++++%7D%0A%0A++++++++++++_disposed+%3D+true%3B%0A++++++++%7D%0A%0A++++++++%23endregion%0A%0A++++%7D%0A%7D
